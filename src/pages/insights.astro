---
import Header from '../sections/Header.astro';
import Footer from '../sections/Footer.astro';
import Layout from '../layouts/DefaultLayout.astro';

import { getCollection } from 'astro:content';
const posts = await getCollection('blog');

const title = 'Albert Calvet - Insights';
const description =
  'Here you will find some thoughts about product and other subjects of my interest.';
const canonical = 'https://acalvet.com/insights';
---

<Layout title={title} description={description} canonical={canonical}>
  <Header />
  <main class="w-full min-h-[calc(100vh-160px)] flex flex-col justify-start items-center">
    <div class="pageHeadings py-16 w-7xl flex flex-col gap-8 items-start">
      <h1 class="text-5xl">Insights</h1>
      <p class="text-lg text-gray-600">{description}</p>
    </div>
    {posts.length === 0 && <p>No posts found.</p>}
    {posts.length > 0 && 
      <ul class="w-7xl flex flex-col gap-4">
        {posts.map((post) => (
          <li class="flex flex-col gap-2 mb-4">
            <a href={`/blog/${post.slug}`} class="flex flex-col gap-2">
            <h2 class="text-2xl">{post.data.title}</h2>
            <p class="text-gray-600 text-sm">{post.data.readTime} minutes read</p>
            <p class="text-gray-900 text-md hover:underline">Read article</p>
            </a>
          </li>
        ))}
      </ul>
    }
  </main>
  <Footer />
</Layout>
