---
import { getEntry, getCollection } from 'astro:content';
import Layout from '../../layouts/DefaultLayout.astro';
import '../../styles/blog.css';

// Add this getStaticPaths function
export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map(post => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

// Get the post from props instead of fetching it
const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
  <main class="min-h-[calc(100vh-160px)] max-w-4xl mx-auto px-8 lg:px-16 py-8 md:py-16">
    <!-- Title -->
    <h1 class="text-3xl sm:text-4xl font-medium tracking-tight mb-2">{post.data.title}</h1>
    
    <!-- Date -->
    <p class="text-zinc-500 text-sm mb-4">
      {post.data.pubDate.toLocaleDateString()}
    </p>

    <!-- Content -->
    <article class="content prose max-w-none mt-6">
      <Content />
    </article>
  </main>
</Layout>

