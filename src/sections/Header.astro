---
import Logo from '../components/logo.astro';
import ThemeToggle from '../components/themeToggle.astro';

const { pathname } = Astro.url;
---

<header class="sticky top-0 z-50 max-h-[80px] bg-white dark:bg-zinc-950 border-b border-zinc-200 dark:border-zinc-700 px-4 md:px-8">
  <div class="max-w-7xl px-4 mx-auto flex items-center justify-between h-20">
    <!-- Logo -->
    <Logo pathname={Astro.url.pathname} />

    <!-- Nav (desktop only) -->
    <nav class="navbar hidden md:flex flex-row items-center text-base dark:text-zinc-50 hover:text-zinc-400 dark:hover:text-zinc-500">
      <a href="/about">About</a>
      <!--a href="/work">Work</a>-->
      <a href="/insights">Insights</a>
    </nav>

    <div><ThemeToggle /></div>

    <!-- Email (desktop only) -->
    <a href="mailto:hello@acalvet.com" class="hidden md:block text-base border border-zinc-300 dark:border-zinc-600 dark:text-zinc-50 rounded-full px-4 py-2 hover:border-zinc-400 dark:hover:border-zinc-200">
      hello@acalvet.com
    </a>

    <!-- Hamburger (mobile only) -->
    <button 
      id="menu-toggle" 
      aria-label="Toggle menu"
      class="md:hidden relative w-6 h-5 z-50 mr-1">
      <span class="absolute top-0 left-0 w-6 h-[2px] bg-black dark:bg-zinc-50 transition-all duration-300 ease-in-out"></span>
      <span class="absolute top-[8px] left-0 w-6 h-[2px] bg-black dark:bg-zinc-50 transition-all duration-300 ease-in-out"></span>
      <span class="absolute top-[16px] left-0 w-6 h-[2px] bg-black dark:bg-zinc-50 transition-all duration-300 ease-in-out"></span>
    </button>
  </div>
</header>

<!-- Mobile menu -->
<div 
  id="mobile-menu"
  role="navigation"
  aria-label="Mobile navigation"
  class="fixed top-[80px] left-0 w-full h-auto bg-white dark:bg-zinc-950 border-b border-zinc-300 dark:border-zinc-700 transform -translate-y-full transition-transform duration-300 ease-in-out md:hidden z-40">
  <div class="p-6 flex flex-col items-left space-y-6 text-lg text-zinc-950 dark:text-zinc-50">
    <a href="/about">About</a>
    <!--<a href="/work">Work</a>-->
    <a href="/insights">Insights</a>
    <a href="mailto:hello@acalvet.com" class="text-base text-center border border-zinc-300 dark:border-zinc-600 rounded-full px-4 py-2 hover:border-zinc-400 dark:hover:border-zinc-200">hello@acalvet.com</a>
  </div>
</div>

<script>
  const currentPath = window.location.pathname;
  document.querySelectorAll(".navbar a").forEach(link => {
    const href = link.getAttribute("href");
    if (currentPath === href || currentPath.startsWith(href + "/")) {
      link.classList.add("active");
    }
  });
</script>

